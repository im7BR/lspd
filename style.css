:root {
  /* Dark Theme Variables (Default) */
  --bg: #0b1220;
  --card: #0f1724;
  --card-rgb: 15, 23, 36;
  --accent: #0ea5ff;
  --accent-text: #002233;
  --danger: #ff5555;
  --danger-text: #330000;
  --text: #e6eef6;
  --muted: #94a3b8;
  --border: rgba(255, 255, 255, 0.04);
  --shadow: rgba(2, 6, 23, 0.6);
  --gradient-start: #071028;
  --gradient-end: #081426;
  --result-bg-start: rgba(255, 255, 255, 0.02);
  --result-bg-end: transparent;
  --notfound-text: #ffb4b4;
  --input-bg: transparent;
  color-scheme: dark;
}

/* Light Theme Variables */
.light-theme {
  --bg: #f1f5f9;
  --card: #ffffff;
  --card-rgb: 255, 255, 255;
  --accent: #0ea5ff;
  --accent-text: #ffffff;
  --danger: #ef4444;
  --danger-text: #ffffff;
  --text: #1e293b;
  --muted: #64748b;
  --border: rgba(0, 0, 0, 0.1);
  --shadow: rgba(100, 116, 139, 0.2);
  --gradient-start: #e2e8f0;
  --gradient-end: #f1f5f9;
  --result-bg-start: rgba(0, 0, 0, 0.02);
  --result-bg-end: transparent;
  --notfound-text: #ef4444;
  --input-bg: #f8fafc;
  color-scheme: light;
}

/* --- Base & General Styles --- */
*, *::before, *::after { box-sizing: border-box; }

body {
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, 'Helvetica Neue', Arial;
  margin: 0;
  padding: 80px 0 0 0; /* Add top padding only */
  background: linear-gradient(180deg, var(--gradient-start) 0%, var(--gradient-end) 100%);
  color: var(--text);
  min-height: 100vh;
  transition: background-color 0.3s ease, color 0.3s ease;
  overflow-x: hidden;
}

.container {
  max-width: 780px;
  margin: 0 auto;
  padding: 28px; /* Consistent padding inside container */
  position: relative;
  z-index: 1;
}

h1, h2, h3, p, p.lead, code, .hint, .small, .meta { transition: color 0.3s ease; }
h1 { font-size: 20px; margin: 0 0 8px; }
h2 { font-size: 18px; margin-bottom: 10px; }
h3 { font-size: 16px; margin-bottom: 10px; }
p { margin-top: 0; margin-bottom: 10px; line-height: 1.6; }
p.lead { margin: 0 0 20px; color: var(--muted); }
code { background: rgba(125,125,125,0.1); padding: 2px 5px; border-radius: 4px; font-size: 0.9em;}

.card {
  background: var(--card); border-radius: 12px; padding: 18px;
  box-shadow: 0 6px 24px var(--shadow);
  transition: background-color 0.3s ease, box-shadow 0.3s ease;
  margin-bottom: 30px; /* Space between cards */
}
/* No margin-top needed if using margin-bottom */

.row { display: flex; gap: 8px; align-items: center; /* Vertically align items in rows */ }
input[type=text], textarea { /* ... input/textarea styles ... */ }
button { /* ... base button styles ... */ }
/* ... other button styles (endDuty, stopTimer, hover, active, disabled) ... */
.result, .stars, .meta, .small, .hint, .notfound { /* ... result styles ... */ }
footer { margin-top: 30px; margin-bottom: 20px; color: var(--muted); font-size: 13px; text-align: center; }
.copy-btn { /* ... copy button styles ... */ }

/* Animation */
@keyframes fadeInDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
.smooth-show { animation: fadeInDown 0.3s ease-out forwards; }


/* --- Fixed Top Buttons --- */
#homeBtn, #menuToggleBtn, #themeToggleBtn {
  position: fixed; top: 20px; z-index: 1010; /* Highest z-index for controls */
  padding: 8px; background: var(--card); border: 1px solid var(--border); color: var(--muted);
  display: flex; align-items: center; justify-content: center;
  transition: all 0.2s ease-out;
}
#homeBtn { left: 20px; }
#themeToggleBtn { left: 80px; }
#menuToggleBtn { right: 20px; padding: 6px 10px; font-size: 20px; line-height: 1; }
/* ... Top button hover/active/icon styles ... */
.icon-moon { display: none; }
.light-theme .icon-sun { display: none; }
.light-theme .icon-moon { display: block; }

/* --- Tab Content --- */
.tab-content { display: none; padding-bottom: 20px; /* Add bottom padding to tabs */}
.tab-content.active { display: block; animation: fadeInDown 0.3s ease-out; }

/* --- Wizard Styles --- */
/* ... existing wizard styles ... */

/* --- Slide Menu Styles (Right) --- */
#menuOverlay { position: fixed; inset: 0; background: rgba(0,0,0,0.6); z-index: 1001; opacity: 0; transition: opacity 0.3s ease-in-out; pointer-events: none; }
#menuOverlay.menu-open { opacity: 1; pointer-events: auto; }
#slideMenu {
  position: fixed; top: 0; right: 0; bottom: 0;
  width: 280px; background: #0d1625; z-index: 1002;
  transform: translateX(100%); transition: transform 0.3s ease-in-out, background-color 0.3s ease;
  padding: 20px; padding-top: 70px; box-shadow: -10px 0 30px rgba(0,0,0,0.3);
  display: flex; flex-direction: column; gap: 12px; overflow-y: auto;
}
.light-theme #slideMenu { background: #e2e8f0; box-shadow: -10px 0 30px rgba(100, 116, 139, 0.2); }
#slideMenu.menu-open { transform: translateX(0); }
#closeMenuBtn { position: absolute; top: 20px; right: 20px; z-index: 1003; /* ... other close button styles ... */ }
.menu-btn { /* ... existing styles ... */ }
/* ... menu button hover/active styles ... */

/* --- Settings Tab --- */
/* ... existing settings styles ... */

/* --- Shift Timer --- */
/* ... existing shift timer styles ... */

/* --- About Tab --- */
/* ... existing about styles ... */


/* --- Situations Flyout Styles (Right) --- */
#situationsFlyout {
    position: fixed;
    top: 80px; /* Below header */
    bottom: 20px;
    right: 0;
    width: 320px;
    background-color: var(--card);
    border-left: 1px solid var(--border);
    border-top: 1px solid var(--border);
    border-bottom: 1px solid var(--border);
    border-radius: 12px 0 0 12px;
    box-shadow: -6px 0 24px var(--shadow);
    z-index: 999; /* Below header buttons, Above content */
    transform: translateX(calc(100% - 40px)); /* Start mostly hidden showing only button width */
    transition: transform 0.3s ease-in-out, background-color 0.3s ease, border-color 0.3s ease;
    overflow-y: auto; /* Allow scrolling inside */
}
#situationsFlyout.flyout-open {
    transform: translateX(0); /* Slide fully into view */
}

#situationsToggleBtn {
    position: absolute; /* Relative to the flyout panel */
    top: 0;
    left: 0; /* Position at the left edge of the panel */
    width: 40px; /* Width of the visible part when closed */
    height: 60px;
    padding: 0;
    border: none;
    border-right: 1px solid var(--border); /* Separator line */
    border-radius: 12px 0 0 0; /* Match panel corner */
    background: var(--card);
    color: var(--muted);
    font-size: 20px;
    line-height: 60px;
    text-align: center;
    cursor: pointer;
    box-shadow: none;
    transition: all 0.2s ease-out;
    z-index: 2; /* Ensure button is clickable above content */
}
#situationsToggleBtn:hover {
    color: var(--accent);
    background-color: rgba(var(--accent-rgb, 14, 165, 255), 0.1);
    transform: none; /* No vertical movement */
    filter: none;
    box-shadow: none;
}
#situationsToggleBtn:active {
    transform: scale(0.98); /* Click effect */
    filter: brightness(0.95);
}

.flyout-content {
    padding: 18px;
    padding-top: 70px; /* Space below the toggle button */
}
.flyout-content h3 { /* ... styles ... */ }
.flyout-content .situation-btn { /* ... styles ... */ }
.flyout-content .command-section { /* ... styles ... */ }
.flyout-content .command-item { /* ... styles ... */ }
.flyout-content .command-item div { /* ... styles ... */ }
